<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>专注模式 - TimeMaster</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: #fff;
            color: #333;
            min-height: 100vh;
            padding-top: 80px;
        }

        /* 导航栏样式 */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
        }

        nav {
            background: rgba(255, 255, 255, 0.95);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            padding: 0 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        nav:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            height: 80px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }

        .logo-icon {
            background: linear-gradient(135deg, #4b6cb7 0%, #182848 100%);
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            box-shadow: 0 4px 10px rgba(75, 108, 183, 0.3);
        }

        .logo-text {
            font-size: 28px;
            font-weight: 800;
            background: linear-gradient(135deg, #182848 0%, #4b6cb7 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.5px;
        }

        .nav-links {
            display: flex;
            gap: 15px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 24px;
            border-radius: 15px;
            font-weight: 600;
            font-size: 16px;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }

        .nav-link i {
            margin-right: 10px;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(0, 0, 0, 0.1);
        }

        .nav-link:hover i {
            transform: scale(1.2);
        }

        .nav-link.home {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            color: #1565c0;
            border: 2px solid #90caf9;
        }

        .nav-link.focus {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            color: #2e7d32;
            border: 2px solid #a5d6a7;
        }

        .nav-link.report {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            color: #ef6c00;
            border: 2px solid #ffcc80;
        }

        .nav-link.plan {
            background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
            color: #7b1fa2;
            border: 2px solid #ce93d8;
        }

        .nav-link.login {
            background: linear-gradient(135deg, #4b6cb7 0%, #182848 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(75, 108, 183, 0.4);
        }

        .nav-link.login:hover {
            box-shadow: 0 7px 20px rgba(75, 108, 183, 0.6);
        }

        .mobile-toggle {
            display: none;
            font-size: 24px;
            color: #182848;
            cursor: pointer;
        }

        /* 主内容区域 */
        .container {
            max-width: 800px;
            width: 100%;
            background: rgba(255, 255, 255, 0.93);
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            margin: 0 auto 40px;
        }

        .main-content {
            padding: 30px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 25px;
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f1f2f6;
        }

        .card-header h2 {
            font-size: 1.8rem;
            color: #2c3e50;
            margin-left: 15px;
        }

        .icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.8rem;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            color: #d63031;
        }

        .timer-container {
            text-align: center;
            margin: 20px 0;
        }

        .timer-display {
            font-size: 4.5rem;
            font-weight: 700;
            font-family: 'Courier New', monospace;
            color: #2c3e50;
            margin: 20px 0;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            border: 3px solid #e9ecef;
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.05);
        }

        .focus-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 25px 0;
        }

        .btn {
            padding: 14px 30px;
            font-size: 1.2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-primary {
            background: linear-gradient(135deg, #1a2a6c 0%, #2c3e50 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #00b09b 0%, #96c93d 100%);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #ff9a00 0%, #ffd000 100%);
            color: white;
        }

        .btn-info {
            background: linear-gradient(135deg, #00c9ff 0%, #92fe9d 100%);
            color: white;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .task-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .form-group label {
            font-weight: 600;
            color: #2c3e50;
            font-size: 1.1rem;
        }

        .form-group select, .form-group input {
            padding: 14px 18px;
            border-radius: 12px;
            border: 1px solid #ddd;
            font-size: 1.1rem;
            background: #f8f9fa;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #1a2a6c;
            box-shadow: 0 0 0 3px rgba(26, 42, 108, 0.1);
        }

        .other-subject-container {
            display: none;
            margin-top: 10px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 1px solid #e9ecef;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #1a2a6c;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1rem;
            color: #7f8c8d;
        }

        .progress-container {
            margin: 30px 0;
        }

        .progress-title {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-weight: 600;
            color: #2c3e50;
            align-items: center;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .target-info {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .target-count {
            background: #e0f7fa;
            border-radius: 20px;
            padding: 4px 12px;
            font-weight: 600;
            color: #1a2a6c;
        }

        .target-progress {
            font-weight: 600;
            color: #1a2a6c;
        }

        .progress-bar {
            height: 16px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #1a2a6c, #b21f1f);
            border-radius: 10px;
            width: 0%;
            transition: width 0.5s ease;
        }

        .set-target-btn {
            background: #3498db;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .set-target-btn:hover {
            background: #2980b9;
            transform: scale(1.1);
        }

        .active-session {
            background: rgba(154, 236, 219, 0.2);
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
            border: 2px solid #00b894;
            display: none;
        }

        .active-task {
            font-weight: 700;
            margin-bottom: 10px;
            color: #00b894;
            font-size: 1.3rem;
        }

        .active-duration {
            font-size: 1.1rem;
            color: #2c3e50;
            font-weight: 500;
        }

        .session-list {
            margin-top: 15px;
            max-height: 300px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .empty-message {
            text-align: center;
            padding: 30px;
            color: #7f8c8d;
            font-style: italic;
        }

        .session-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8f9fa;
            border-radius: 10px;
            margin-bottom: 10px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .session-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .session-item:last-child {
            margin-bottom: 0;
        }

        .session-info {
            flex: 1;
        }

        .session-task {
            font-weight: 600;
            margin-bottom: 5px;
            color: #2c3e50;
        }

        .session-details {
            display: flex;
            gap: 15px;
            font-size: 0.95rem;
            color: #7f8c8d;
        }

        .session-duration {
            font-weight: 700;
            color: #b21f1f;
            font-size: 1.1rem;
            min-width: 80px;
            text-align: right;
        }

        footer {
            text-align: center;
            padding: 20px;
            color: white;
            background: #2c3e50;
            font-size: 1rem;
        }

        .week-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background: #f1f8ff;
            border-radius: 12px;
        }

        .week-nav-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #e9ecef;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            color: #2c3e50;
        }

        .week-nav-btn:hover {
            background: #dbeafe;
            transform: scale(1.1);
        }

        .week-nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .week-title {
            font-weight: 600;
            color: #1a2a6c;
            padding: 6px 15px;
            border-radius: 20px;
            background: #e0f7fa;
            font-size: 1.1rem;
        }

        .week-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .week-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #cbd5e1;
        }

        .week-dot.active {
            background: #1a2a6c;
        }

        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #00b894;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .notification.show {
            opacity: 1;
        }

        .timer-mode-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .mode-btn {
            padding: 10px 20px;
            border-radius: 30px;
            border: 2px solid #3498db;
            background: #f8f9fa;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mode-btn.active {
            background: #3498db;
            color: white;
            border-color: #2980b9;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .countdown-controls {
            display: none;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .countdown-input {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #f1f8ff;
            padding: 10px 15px;
            border-radius: 12px;
        }

        .countdown-input input {
            width: 60px;
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid #ddd;
            text-align: center;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .alarm-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .alarm-container.show {
            opacity: 1;
            visibility: visible;
        }

        .alarm-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            animation: pulse 1.5s infinite;
        }

        .alarm-content h2 {
            font-size: 2.5rem;
            color: #e74c3c;
            margin-bottom: 20px;
        }

        .alarm-content p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: #2c3e50;
        }

        .alarm-content button {
            padding: 12px 35px;
            font-size: 1.2rem;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .alarm-content button:hover {
            background: #2980b9;
            transform: translateY(-3px);
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }

        .timer-display.countdown {
            color: #e74c3c;
        }

        .timer-display.countdown.warning {
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        /* 目标设置模态框样式 */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .modal.show .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .modal-header h3 {
            font-size: 1.5rem;
            color: #2c3e50;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #7f8c8d;
            transition: color 0.3s ease;
        }

        .close-btn:hover {
            color: #e74c3c;
        }

        .target-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .target-input {
            padding: 12px 15px;
            border-radius: 10px;
            border: 1px solid #ddd;
            font-size: 1.1rem;
            width: 100%;
        }

        .target-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .modal-btn {
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-btn-primary {
            background: #3498db;
            color: white;
        }

        .modal-btn-primary:hover {
            background: #2980b9;
        }

        .mode-indicator {
            margin-top: 15px;
            padding: 8px 15px;
            border-radius: 20px;
            background: #f1f8ff;
            display: inline-block;
            font-weight: 600;
            color: #3498db;
            font-size: 0.9rem;
        }

        .mode-indicator.countdown {
            background: #fff0f0;
            color: #e74c3c;
        }

        .mode-indicator i {
            margin-right: 5px;
        }

        .countdown-controls.disabled input {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .status-indicator {
            margin-top: 15px;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .status-running {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .status-paused {
            background: #fff3e0;
            color: #ef6c00;
        }

        @media (max-width: 600px) {
            .timer-display {
                font-size: 3.5rem;
                padding: 15px;
            }

            .focus-controls {
                flex-direction: column;
                gap: 12px;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            .stats {
                grid-template-columns: 1fr;
            }

            .nav-links {
                display: none;
                position: absolute;
                top: 80px;
                left: 0;
                width: 100%;
                background: white;
                flex-direction: column;
                padding: 20px;
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            }

            .mobile-toggle {
                display: block;
            }

            .nav-links.active {
                display: flex;
            }
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <header>
        <nav>
            <div class="nav-container">
                <a href="#" class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <span class="logo-text">TimeMaster</span>
                </a>

                <div class="nav-links">
                    <a href="main.html" class="nav-link home">
                        <i class="fas fa-home"></i>首页
                    </a>
                    <a href="zhuanzhu.html" class="nav-link focus">
                        <i class="fas fa-clock"></i>专注模式
                    </a>
                    <a href="generate.html" class="nav-link plan">
                        <i class="fas fa-calendar-check"></i>生成计划
                    </a>
                    <a href="login.html" class="nav-link login">
                        <i class="fas fa-user-circle"></i>登录
                    </a>
                </div>

                <div class="mobile-toggle">
                    <i class="fas fa-bars"></i>
                </div>
            </div>
        </nav>
    </header>

    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText"></span>
    </div>

    <div class="alarm-container" id="alarmContainer">
        <div class="alarm-content">
            <h2><i class="fas fa-bell"></i> 时间到！</h2>
            <p>您的专注时间已结束，请休息一下</p>
            <button id="stopAlarmBtn">停止闹钟</button>
        </div>
    </div>

    <!-- 目标设置模态框 -->
    <div class="modal" id="targetModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-bullseye"></i> 设置专注目标</h3>
                <button class="close-btn" id="closeModalBtn">&times;</button>
            </div>
            <div class="target-form">
                <p>设置您本周的目标专注次数：</p>
                <input type="number" id="targetInput" class="target-input" min="1" max="50" placeholder="输入目标次数">
                <button id="saveTargetBtn" class="modal-btn modal-btn-primary">保存目标</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="main-content">
            <!-- 任务设置模块 -->
            <div class="card">
                <div class="card-header">
                    <div class="icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <h2>任务设置</h2>
                </div>

                <div class="task-form">
                    <div class="form-group">
                        <label for="taskName"><i class="fas fa-pencil-alt"></i> 任务名称</label>
                        <input type="text" id="taskName" placeholder="例如：完成软件工程作业">
                    </div>

                    <div class="form-group">
                        <label for="subject"><i class="fas fa-book"></i> 学习科目</label>
                        <select id="subject">
                            <option value="">-- 请选择科目 --</option>
                            <option value="操作系统">操作系统</option>
                            <option value="人工智能">人工智能</option>
                            <option value="信号与系统">信号与系统</option>
                            <option value="毛概">毛概</option>
                            <option value="数值计算">数值计算</option>
                            <option value="其他">其他</option>
                        </select>
                    </div>

                    <div class="other-subject-container" id="otherSubjectContainer">
                        <label for="otherSubject"><i class="fas fa-edit"></i> 其他科目名称</label>
                        <input type="text" id="otherSubject" placeholder="请输入科目名称...">
                    </div>
                </div>
            </div>

            <!-- 专注计时器模块 -->
            <div class="card">
                <div class="card-header">
                    <div class="icon">
                        <i class="fas fa-stopwatch"></i>
                    </div>
                    <h2>专注计时器</h2>
                </div>

                <div class="timer-mode-controls">
                    <button class="mode-btn active" id="timerModeBtn" data-mode="timer">
                        <i class="fas fa-clock"></i> 计时模式
                    </button>
                    <button class="mode-btn" id="countdownModeBtn" data-mode="countdown">
                        <i class="fas fa-hourglass-half"></i> 倒计时模式
                    </button>
                </div>

                <div class="countdown-controls" id="countdownControls">
                    <div class="countdown-input">
                        <label for="countdownHours">时</label>
                        <input type="number" id="countdownHours" min="0" max="23" value="0">
                    </div>
                    <div class="countdown-input">
                        <label for="countdownMinutes">分</label>
                        <input type="number" id="countdownMinutes" min="0" max="59" value="25">
                    </div>
                    <div class="countdown-input">
                        <label for="countdownSeconds">秒</label>
                        <input type="number" id="countdownSeconds" min="0" max="59" value="0">
                    </div>
                </div>

                <div class="timer-container">
                    <div class="timer-display" id="timer">00:00:00</div>

                    <div class="mode-indicator" id="modeIndicator">
                        <i class="fas fa-clock"></i> 计时模式
                    </div>

                    <div class="status-indicator" id="statusIndicator">
                        未开始
                    </div>

                    <div class="focus-controls">
                        <button class="btn btn-primary" id="startBtn">
                            <i class="fas fa-play"></i> 开始专注
                        </button>
                        <button class="btn btn-warning" id="pauseBtn" disabled>
                            <i class="fas fa-pause"></i> 暂停
                        </button>
                        <button class="btn btn-danger" id="endBtn" disabled>
                            <i class="fas fa-stop"></i> 结束
                        </button>
                    </div>
                </div>
            </div>

            <!-- 学习统计模块 -->
            <div class="card">
                <div class="card-header">
                    <div class="icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <h2>学习统计</h2>
                    <div class="week-controls">
                        <div class="week-indicator">
                            <button class="week-nav-btn" id="statsPrevWeekBtn" title="上一周">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <div class="week-title" id="statsWeekTitle">本周</div>
                            <button class="week-nav-btn" id="statsNextWeekBtn" title="下一周" disabled>
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-value" id="totalFocus">0.0</div>
                        <div class="stat-label">总专注时间(小时)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="sessionsCount">0</div>
                        <div class="stat-label">专注次数</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="avgFocus">0</div>
                        <div class="stat-label">平均时长(分钟)</div>
                    </div>
                </div>

                <div class="progress-container">
                    <div class="progress-header">
                        <div class="target-info">
                            <span><i class="fas fa-bullseye"></i> 本周目标:</span>
                            <span class="target-count" id="targetCount">5</span>
                            <span>次</span>
                        </div>
                        <div class="target-progress" id="progressPercent">完成 0/5 (0%)</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-title">
                        <span>本周专注目标进度</span>
                        <button class="set-target-btn" id="setTargetBtn" title="设置目标">
                            <i class="fas fa-cog"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- 专注任务历史模块 -->
            <div class="card">
                <div class="card-header">
                    <div class="icon">
                        <i class="fas fa-history"></i>
                    </div>
                    <h2>专注任务历史</h2>
                    <div class="week-controls">
                        <div class="week-indicator">
                            <button class="week-nav-btn" id="historyPrevWeekBtn" title="上一周">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <div class="week-title" id="historyWeekTitle">本周</div>
                            <button class="week-nav-btn" id="historyNextWeekBtn" title="下一周" disabled>
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="session-list" id="sessionList">
                    <div class="empty-message">
                        暂无专注任务记录<br>
                        <small>开始专注学习后，您的任务将显示在这里</small>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>© 2025 学习助手 | 专注模式</p>
        </footer>
    </div>

    <audio id="alarmSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3" type="audio/mpeg">
    </audio>

    <script>
        // 计时器变量
        let timer;
        let hours = 0;
        let minutes = 0;
        let seconds = 0;
        let isRunning = false;
        let isPaused = false;
        let totalSeconds = 0;
        let startTime = null;
        let timerMode = 'timer'; // 'timer' 或 'countdown'
        let countdownTotalSeconds = 0;
        let countdownRemainingSeconds = 0;

        // 周导航变量
        let historyWeekOffset = 0;
        let statsWeekOffset = 0;

        // 目标专注次数
        let weeklyFocusTarget = 5;

        // 数据存储
        let focusSessions = [];
        let weeklyStats = {
            0: { totalHours: 0, sessionsCount: 0, avgMinutes: 0 },
            1: { totalHours: 0, sessionsCount: 0, avgMinutes: 0 },
            2: { totalHours: 0, sessionsCount: 0, avgMinutes: 0 },
            3: { totalHours: 0, sessionsCount: 0, avgMinutes: 0 }
        };

        // DOM元素
        const timerDisplay = document.getElementById('timer');
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const endBtn = document.getElementById('endBtn');
        const taskNameInput = document.getElementById('taskName');
        const subjectSelect = document.getElementById('subject');
        const otherSubjectContainer = document.getElementById('otherSubjectContainer');
        const otherSubjectInput = document.getElementById('otherSubject');
        const sessionList = document.getElementById('sessionList');
        const totalFocus = document.getElementById('totalFocus');
        const sessionsCount = document.getElementById('sessionsCount');
        const avgFocus = document.getElementById('avgFocus');
        const progressFill = document.getElementById('progressFill');
        const progressPercent = document.getElementById('progressPercent');
        const notification = document.getElementById('notification');
        const notificationText = document.getElementById('notificationText');
        const timerModeBtn = document.getElementById('timerModeBtn');
        const countdownModeBtn = document.getElementById('countdownModeBtn');
        const countdownControls = document.getElementById('countdownControls');
        const countdownHours = document.getElementById('countdownHours');
        const countdownMinutes = document.getElementById('countdownMinutes');
        const countdownSeconds = document.getElementById('countdownSeconds');
        const alarmContainer = document.getElementById('alarmContainer');
        const stopAlarmBtn = document.getElementById('stopAlarmBtn');
        const alarmSound = document.getElementById('alarmSound');
        const targetCount = document.getElementById('targetCount');
        const setTargetBtn = document.getElementById('setTargetBtn');
        const targetModal = document.getElementById('targetModal');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const targetInput = document.getElementById('targetInput');
        const saveTargetBtn = document.getElementById('saveTargetBtn');
        const modeIndicator = document.getElementById('modeIndicator');
        const statusIndicator = document.getElementById('statusIndicator');

        // 历史记录周导航
        const historyPrevWeekBtn = document.getElementById('historyPrevWeekBtn');
        const historyNextWeekBtn = document.getElementById('historyNextWeekBtn');
        const historyWeekTitle = document.getElementById('historyWeekTitle');

        // 统计周导航
        const statsPrevWeekBtn = document.getElementById('statsPrevWeekBtn');
        const statsNextWeekBtn = document.getElementById('statsNextWeekBtn');
        const statsWeekTitle = document.getElementById('statsWeekTitle');

        // 导航元素
        const mobileToggle = document.querySelector('.mobile-toggle');
        const navLinks = document.querySelector('.nav-links');

        // 初始化计时器显示
        function updateTimerDisplay() {
            let displayHours = hours;
            let displayMinutes = minutes;
            let displaySeconds = seconds;

            if (timerMode === 'countdown') {
                // 倒计时模式
                displayHours = Math.floor(countdownRemainingSeconds / 3600);
                displayMinutes = Math.floor((countdownRemainingSeconds % 3600) / 60);
                displaySeconds = countdownRemainingSeconds % 60;

                // 添加警告样式（剩余5分钟以内）
                if (countdownRemainingSeconds <= 300) { // 5分钟 = 300秒
                    timerDisplay.classList.add('warning');
                } else {
                    timerDisplay.classList.remove('warning');
                }
            }

            timerDisplay.textContent =
                `${displayHours.toString().padStart(2, '0')}:` +
                `${displayMinutes.toString().padStart(2, '0')}:` +
                `${displaySeconds.toString().padStart(2, '0')}`;

            // 更新状态指示器
            updateStatusIndicator();
        }

        // 更新状态指示器
        function updateStatusIndicator() {
            if (isRunning) {
                statusIndicator.className = 'status-indicator status-running';
                statusIndicator.innerHTML = '<i class="fas fa-running"></i> 专注中';
            } else if (isPaused) {
                statusIndicator.className = 'status-indicator status-paused';
                statusIndicator.innerHTML = '<i class="fas fa-pause"></i> 已暂停';
            } else {
                statusIndicator.className = 'status-indicator';
                statusIndicator.textContent = '未开始';
            }
        }

        // 切换计时器模式
        function setTimerMode(mode) {
            timerMode = mode;

            // 更新UI
            if (mode === 'timer') {
                timerModeBtn.classList.add('active');
                countdownModeBtn.classList.remove('active');
                countdownControls.style.display = 'none';
                timerDisplay.classList.remove('countdown', 'warning');
                resetTimer();
                modeIndicator.innerHTML = '<i class="fas fa-clock"></i> 计时模式';
                modeIndicator.className = 'mode-indicator';
            } else {
                timerModeBtn.classList.remove('active');
                countdownModeBtn.classList.add('active');
                countdownControls.style.display = 'flex';
                timerDisplay.classList.add('countdown');
                resetTimer();
                modeIndicator.innerHTML = '<i class="fas fa-hourglass-half"></i> 倒计时模式';
                modeIndicator.className = 'mode-indicator countdown';

                // 设置默认倒计时时间
                countdownHours.value = '0';
                countdownMinutes.value = '25';
                countdownSeconds.value = '0';

                // 计算总秒数
                calculateCountdownTime();
            }
        }

        // 计算倒计时时间
        function calculateCountdownTime() {
            const hours = parseInt(countdownHours.value) || 0;
            const minutes = parseInt(countdownMinutes.value) || 0;
            const seconds = parseInt(countdownSeconds.value) || 0;

            countdownTotalSeconds = hours * 3600 + minutes * 60 + seconds;
            countdownRemainingSeconds = countdownTotalSeconds;

            // 更新显示
            updateTimerDisplay();
        }

        // 显示通知
        function showNotification(message, success = true) {
            notificationText.textContent = message;
            notification.style.background = success ? '#00b894' : '#e74c3c';
            notification.querySelector('i').className = success ?
                'fas fa-check-circle' : 'fas fa-exclamation-circle';

            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // 开始专注
        function startFocus() {
            // 验证表单
            const taskName = taskNameInput.value.trim();
            const subject = subjectSelect.value;

            if (!taskName) {
                showNotification('请输入任务名称', false);
                taskNameInput.focus();
                return;
            }

            if (!subject) {
                showNotification('请选择学习科目', false);
                subjectSelect.focus();
                return;
            }

            // 倒计时模式验证
            if (timerMode === 'countdown') {
                // 如果是第一次开始（不是继续），计算初始时间
                if (startTime === null) {
                    calculateCountdownTime();

                    if (countdownTotalSeconds <= 0) {
                        showNotification('请设置有效的倒计时时间', false);
                        return;
                    }
                    countdownRemainingSeconds = countdownTotalSeconds;
                }
            }

            // 记录开始时间
            if (startTime === null) {
                startTime = new Date();
            }

            // 禁用倒计时输入框
            countdownHours.disabled = true;
            countdownMinutes.disabled = true;
            countdownSeconds.disabled = true;
            countdownControls.classList.add('disabled');

            // 清除之前的计时器
            if (timer) {
                clearInterval(timer);
                timer = null;
            }

            // 启动计时器
            timer = setInterval(() => {
                if (timerMode === 'timer') {
                    // 计时模式
                    seconds++;
                    if (seconds === 60) {
                        seconds = 0;
                        minutes++;
                    }
                    if (minutes === 60) {
                        minutes = 0;
                        hours++;
                    }

                    totalSeconds++;
                } else {
                    // 倒计时模式
                    if (countdownRemainingSeconds > 0) {
                        countdownRemainingSeconds--;
                    } else {
                        // 倒计时结束
                        clearInterval(timer);
                        isRunning = false;
                        showAlarm();
                        return;
                    }
                }

                updateTimerDisplay();
            }, 1000);

            startBtn.innerHTML = '<i class="fas fa-play"></i> 继续专注';
            pauseBtn.disabled = false;
            endBtn.disabled = false;
            isRunning = true;
            isPaused = false;

            // 禁用表单
            taskNameInput.disabled = true;
            subjectSelect.disabled = true;
            if (otherSubjectContainer.style.display === 'block') {
                otherSubjectInput.disabled = true;
            }

            // 显示通知
            showNotification(`任务 "${taskName}" 已开始`);
        }

        // 显示闹钟
        function showAlarm() {
            alarmContainer.classList.add('show');
            alarmSound.currentTime = 0;
            alarmSound.play();
        }

        // 停止闹钟
        function stopAlarm() {
            alarmContainer.classList.remove('show');
            alarmSound.pause();
            alarmSound.currentTime = 0;

            // 结束专注
            endFocus();
        }

        // 暂停计时器
        function pauseTimer() {
            if (isRunning) {
                clearInterval(timer);
                timer = null;
                isRunning = false;
                isPaused = true;
                startBtn.innerHTML = '<i class="fas fa-play"></i> 继续专注';
                pauseBtn.disabled = true;

                // 启用倒计时输入框
                countdownHours.disabled = false;
                countdownMinutes.disabled = false;
                countdownSeconds.disabled = false;
                countdownControls.classList.remove('disabled');

                // 显示通知
                showNotification('已暂停计时');
            }
        }

        // 结束专注
        function endFocus() {
            if (!isRunning && !startTime && timerMode !== 'countdown') return;

            if (timer) {
                clearInterval(timer);
                timer = null;
            }
            isRunning = false;
            isPaused = false;

            // 计算专注时间（秒）
            const endTime = new Date();
            let durationSeconds = 0;

            if (timerMode === 'timer') {
                durationSeconds = Math.round((endTime - startTime) / 1000);
            } else {
                // 倒计时模式下，实际专注时间是总倒计时时间减去剩余时间
                durationSeconds = countdownTotalSeconds - countdownRemainingSeconds;
            }

            const durationMinutes = Math.round(durationSeconds / 60);

            // 准备保存任务
            const taskName = taskNameInput.value.trim() || "未命名任务";
            const subject = getSubject();

            // 创建任务对象
            const task = {
                id: Date.now(),
                date: new Date().toISOString().split('T')[0],
                task: taskName,
                subject: subject,
                duration: durationMinutes,
                time: durationSeconds
            };

            // 添加到任务列表
            focusSessions.unshift(task);

            // 更新统计信息（只更新本周）
            updateWeeklyStats(0, task);

            // 保存到localStorage
            saveToLocalStorage();

            // 重置历史记录视图到本周
            historyWeekOffset = 0;
            renderFocusSessions(0);
            updateWeekNavButtons();

            // 更新统计显示
            updateStatisticsDisplay(statsWeekOffset);

            // 重置表单和计时器
            resetForm();
            resetTimer();

            // 启用表单
            taskNameInput.disabled = false;
            subjectSelect.disabled = false;
            otherSubjectInput.disabled = false;

            // 启用倒计时输入框
            countdownHours.disabled = false;
            countdownMinutes.disabled = false;
            countdownSeconds.disabled = false;
            countdownControls.classList.remove('disabled');

            // 显示成功消息
            showNotification(`任务 "${taskName}" 已完成！专注时间: ${formatTime(durationSeconds)}`);

            // 将焦点设置到任务名称输入框
            setTimeout(() => {
                taskNameInput.focus();
            }, 100);
        }

        // 更新每周统计数据
        function updateWeeklyStats(weekIndex, task) {
            // 计算总专注时间（小时）
            weeklyStats[weekIndex].totalHours += (task.duration / 60);

            // 专注次数
            weeklyStats[weekIndex].sessionsCount += 1;

            // 平均时长
            if (weeklyStats[weekIndex].sessionsCount > 0) {
                weeklyStats[weekIndex].avgMinutes = Math.round(
                    (weeklyStats[weekIndex].totalHours * 60) / weeklyStats[weekIndex].sessionsCount
                );
            } else {
                weeklyStats[weekIndex].avgMinutes = 0;
            }
        }

        // 格式化时间
        function formatTime(totalSeconds) {
            const hours = Math.floor(totalSeconds / 3600);
            const mins = Math.floor((totalSeconds % 3600) / 60);
            const secs = totalSeconds % 60;

            return `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        // 获取科目（处理"其他"选项）
        function getSubject() {
            const subject = subjectSelect.value;
            if (subject === "其他" && otherSubjectInput.value.trim() !== "") {
                return otherSubjectInput.value.trim();
            }
            return subject;
        }

        // 更新统计信息显示
        function updateStatisticsDisplay(weekIndex) {
            const stats = weeklyStats[weekIndex];

            // 更新UI
            totalFocus.textContent = stats.totalHours.toFixed(1);
            sessionsCount.textContent = stats.sessionsCount;
            avgFocus.textContent = stats.avgMinutes || 0;

            // 更新进度条
            const progress = weeklyFocusTarget > 0
                ? Math.min(100, (stats.sessionsCount / weeklyFocusTarget) * 100)
                : 0;

            progressFill.style.width = `${progress}%`;

            // 更新进度文本
            const progressText = weeklyFocusTarget > 0
                ? `完成 ${stats.sessionsCount}/${weeklyFocusTarget} (${Math.round(progress)}%)`
                : "未设置目标";

            progressPercent.textContent = progressText;
        }

        // 获取星期几的中文表示
        function getDayOfWeek(dateStr) {
            const days = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];
            const date = new Date(dateStr);
            return days[date.getDay()];
        }

        function getWeekRange(date, weekOffset = 0) {
            const dayOfWeek = date.getDay(); // 0（周日）到6（周六）
            const daysToMonday = (dayOfWeek === 0) ? -6 : 1 - dayOfWeek;

            // 计算本周一（考虑 weekOffset）
            const monday = new Date(date);
            monday.setDate(date.getDate() + daysToMonday - (weekOffset * 7));

            // 计算本周日
            const sunday = new Date(monday);
            sunday.setDate(monday.getDate() + 6);

            return { monday, sunday };
        }

        // 渲染专注任务
        function renderFocusSessions(weekOffset) {
            const today = new Date(); // 当前日期
            const { monday, sunday } = getWeekRange(today, weekOffset);

            // 调整时间为午夜，以便只比较日期部分
            const startOfWeek = new Date(monday);
            startOfWeek.setHours(0, 0, 0, 0);
            const endOfWeek = new Date(sunday);
            endOfWeek.setHours(23, 59, 59, 999);

            // 过滤任务
            const weekSessions = focusSessions.filter(session => {
                const sessionDate = new Date(session.date);
                return sessionDate >= startOfWeek && sessionDate <= endOfWeek;
            });

            if (weekSessions.length === 0) {
                sessionList.innerHTML = `
                    <div class="empty-message">
                        ${getWeekTitle(weekOffset)}暂无专注任务记录<br>
                        <small>开始专注学习后，您的任务将显示在这里</small>
                    </div>
                `;
                return;
            }

            // 创建新的历史记录HTML
            sessionList.innerHTML = weekSessions.map(session => `
                <div class="session-item">
                    <div class="session-info">
                        <div class="session-task">${session.task}</div>
                        <div class="session-details">
                            <span class="session-date">${session.date} ${getDayOfWeek(session.date)}</span>
                            <span class="session-subject">${session.subject}</span>
                        </div>
                    </div>
                    <div class="session-duration">${formatTime(session.time)}</div>
                </div>
            `).join('');
        }

        // 获取当前周标题
        function getWeekTitle(weekOffset) {
            if (weekOffset === 0) return '本周';
            if (weekOffset === 1) return '上周';
            return `前${weekOffset}周`;
        }

        // 重置表单
        function resetForm() {
            taskNameInput.value = '';
            subjectSelect.value = '';
            otherSubjectInput.value = '';
            otherSubjectContainer.style.display = 'none';
            startTime = null;

            // 重置按钮状态
            startBtn.innerHTML = '<i class="fas fa-play"></i> 开始专注';
            pauseBtn.disabled = true;
            endBtn.disabled = true;
        }

        // 重置计时器
        function resetTimer() {
            // 重置计时器
            hours = 0;
            minutes = 0;
            seconds = 0;
            totalSeconds = 0;
            startTime = null;
            countdownRemainingSeconds = countdownTotalSeconds;
            isRunning = false;
            isPaused = false;

            // 更新显示
            updateTimerDisplay();
        }

        // 更新周导航按钮状态
        function updateWeekNavButtons() {
            // 历史记录周导航
            historyNextWeekBtn.disabled = historyWeekOffset === 0;
            historyWeekTitle.textContent = getWeekTitle(historyWeekOffset);

            // 统计周导航
            statsNextWeekBtn.disabled = statsWeekOffset === 0;
            statsWeekTitle.textContent = getWeekTitle(statsWeekOffset);
        }

        // 保存到localStorage
        function saveToLocalStorage() {
            localStorage.setItem('focusSessions', JSON.stringify(focusSessions));
            localStorage.setItem('weeklyStats', JSON.stringify(weeklyStats));
            localStorage.setItem('weeklyFocusTarget', weeklyFocusTarget);
        }

        // 从localStorage加载
        function loadFromLocalStorage() {
            const savedSessions = localStorage.getItem('focusSessions');
            const savedStats = localStorage.getItem('weeklyStats');
            const savedTarget = localStorage.getItem('weeklyFocusTarget');

            if (savedSessions) {
                focusSessions = JSON.parse(savedSessions);
            }

            if (savedStats) {
                weeklyStats = JSON.parse(savedStats);
            }

            if (savedTarget) {
                weeklyFocusTarget = parseInt(savedTarget);
            }

            // 更新目标显示
            targetCount.textContent = weeklyFocusTarget;

            // 确保统计显示正确
            updateStatisticsDisplay(0);
        }

        // 设置专注目标
        function setFocusTarget() {
            targetInput.value = weeklyFocusTarget;
            targetModal.classList.add('show');
        }

        // 保存专注目标
        function saveFocusTarget() {
            const newTarget = parseInt(targetInput.value);

            if (!isNaN(newTarget) && newTarget > 0) {
                weeklyFocusTarget = newTarget;
                targetCount.textContent = weeklyFocusTarget;
                saveToLocalStorage();
                updateStatisticsDisplay(0);
                targetModal.classList.remove('show');
                showNotification(`专注目标已设置为每周${weeklyFocusTarget}次`);
            } else {
                showNotification('请输入有效的目标次数', false);
            }
        }

        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            // 加载保存的数据
            loadFromLocalStorage();

            // 渲染任务列表
            renderFocusSessions(historyWeekOffset);

            // 更新计时器显示
            updateTimerDisplay();

            // 更新周导航按钮
            updateWeekNavButtons();

            // 事件监听
            startBtn.addEventListener('click', startFocus);
            pauseBtn.addEventListener('click', pauseTimer);
            endBtn.addEventListener('click', endFocus);
            stopAlarmBtn.addEventListener('click', stopAlarm);

            // 模式切换
            timerModeBtn.addEventListener('click', () => setTimerMode('timer'));
            countdownModeBtn.addEventListener('click', () => setTimerMode('countdown'));

            // 倒计时输入变化
            countdownHours.addEventListener('change', calculateCountdownTime);
            countdownMinutes.addEventListener('change', calculateCountdownTime);
            countdownSeconds.addEventListener('change', calculateCountdownTime);

            // 科目选择变化事件
            subjectSelect.addEventListener('change', function() {
                if (this.value === "其他") {
                    otherSubjectContainer.style.display = 'block';
                } else {
                    otherSubjectContainer.style.display = 'none';
                }
            });

            // 历史记录周导航按钮
            historyPrevWeekBtn.addEventListener('click', function() {
                historyWeekOffset++;
                renderFocusSessions(historyWeekOffset);
                updateWeekNavButtons();
            });

            historyNextWeekBtn.addEventListener('click', function() {
                if (historyWeekOffset > 0) {
                    historyWeekOffset--;
                    renderFocusSessions(historyWeekOffset);
                    updateWeekNavButtons();
                }
            });

            // 统计周导航按钮
            statsPrevWeekBtn.addEventListener('click', function() {
                statsWeekOffset++;
                updateStatisticsDisplay(statsWeekOffset);
                updateWeekNavButtons();
            });

            statsNextWeekBtn.addEventListener('click', function() {
                if (statsWeekOffset > 0) {
                    statsWeekOffset--;
                    updateStatisticsDisplay(statsWeekOffset);
                    updateWeekNavButtons();
                }
            });

            // 目标设置按钮
            setTargetBtn.addEventListener('click', setFocusTarget);
            saveTargetBtn.addEventListener('click', saveFocusTarget);
            closeModalBtn.addEventListener('click', () => targetModal.classList.remove('show'));

            // 关闭模态框（点击背景）
            targetModal.addEventListener('click', (e) => {
                if (e.target === targetModal) {
                    targetModal.classList.remove('show');
                }
            });

            // 导航栏事件
            mobileToggle.addEventListener('click', () => {
                navLinks.classList.toggle('active');
            });

            // 导航栏滚动效果
            window.addEventListener('scroll', function() {
                const nav = document.querySelector('nav');
                if (window.scrollY > 50) {
                    nav.style.padding = '0 20px';
                    nav.style.boxShadow = '0 5px 15px rgba(0, 0, 0, 0.08)';
                } else {
                    nav.style.padding = '0 30px';
                    nav.style.boxShadow = '0 5px 20px rgba(0, 0, 0, 0.05)';
                }
            });

            // 设置初始焦点
            taskNameInput.focus();
        });
    </script>
</body>
</html>